<!DOCTYPE html>
<html>
    <head>
        <!-- Odometr includes -->
        <link rel="stylesheet" href="css\odometer-theme-slot-machine.css" />
        <link rel="stylesheet" href="css\odometer-theme-grand.css" />
        <link rel="stylesheet" href="css\odometer-theme-major.css" />
        <script src="https://github.hubspot.com/odometer/odometer.js"></script>
        <!-- Extra styles for this example -->
        <style>
            .odometer {
                font-size: 100px;
                z-index: 2;
            }
            .tdGrand {
                background-image: url("img/grand.png");
                width: 66%
            }
            .tdMajor {
                background-image: url("img/major.png");
                width: 33%
            }
            .tdMinor {
                background-image: url("img/minor.png");
            }
            .tdMini {
                background-image: url("img/mini.png");
            }
            td {
                text-align: center;
                vertical-align: top;
                background-repeat: no-repeat;
                background-position: center;
                background-position-y: top;
            }
        </style>
        <script type = "text/javascript">
            function WebSocketTest() {

                if ("WebSocket" in window) {
                    // alert("WebSocket is supported by your Browser!");

                    // Let us open a web socket
                    var ws = new WebSocket("ws://10.7.0.90:6070/echo");

                    ws.onopen = function () {

                        // Web Socket is connected, send data using send()
                        /*ws.send("Message to send");*/
                        /*alert("Message is sent...");*/
                        ws.send("ABCDE");
                    };

                    ws.onmessage = function (evt) {
                        var received_msg = JSON.parse(evt.data);
                        // alert("Message is received... " + received_msg);
                        // console.log(received_msg.prog);
                        setTimeout(function () {
                            odometer.innerHTML = received_msg.prog;
                        }, 1000);
                    };

                    ws.onclose = function () {
                        // websocket is closed.
                        alert("Connection is closed...");
                    };
                } else {
                    // The browser doesn't support WebSocket
                    alert("WebSocket NOT supported by your Browser!");
                }
            }
            window.onload = function(){
                window.odometerOptions = { auto: false }; // Disables auto-initialization

                // For each odometer, initialize with the theme passed in:
                var odometer = new Odometer({ el: document.getElementById("odometerGrand"), value: 123, theme: 'grand' });
                odometer.render();

                    // odometerGrand.innerHTML = 1;

                var odometerMajor = new Odometer({ el: document.getElementById("odometerMajor"), value: 123, theme: 'major' });
                odometerMajor.render();
                odometerMajor.update(0);

                // setTimeout(function(){
                //     odometerGrand.innerHTML = "999999.99";
                //     odometerMajor.innerHTML = 99999.99;
                //     odometerMinor.innerHTML = 9999.99;
                //     odometerMini.innerHTML = 999.99;
                // }, 2000);
            }
            // window.odometerOptions = {
            //   selector: '.odometer', // Change the selector used to automatically find things to be animated
            //   format: '(,ddd).dd', // Change how digit groups are formatted, and how many digits are shown after the decimal point
            //   duration: 60000, // Change how long the javascript expects the CSS animation to take
            //   animation: 'count' // Count is a simpler animation method which just increments the value,
            //                      // use it when you're looking for something more subtle.
            // };
        </script>
    </head>
    <body background="img/bg.jpg">
        <!-- <a href = "javascript:WebSocketTest()">Run WebSocket</a>
        <div id="odometer" class="odometer">"00"</div> -->
        <div style="height: 90vh;">
        <table style="height: 100%; width:  100%">
            <tr>
                <td>
                    <img src="img/gotskill.png">
                </td>
                <td rowspan="2" class="tdGrand">
                    <div id="odometerGrand" class="odometer" style="bottom: -100px;"></div>
                </td>
            </tr>
            <tr>
                <td class="tdMajor">
                    <div id="odometerMajor" class="odometer" style="font-size: 70px; bottom: -45px;"></div>
                </td>
            </tr>
            <tr>
                <td class="tdMinor">
                    <div id="odometerMinor" class="odometer" style="font-size: 68px; bottom: -41px;"></div>
                </td>
            </tr>
            <tr>
                <td class="tdMini">
                    <div id="odometerMini" class="odometer" style="font-size: 65px; bottom: -43px;"></div>
                </td>
            </tr>
        </table>
        </div>
    </body>
</html>